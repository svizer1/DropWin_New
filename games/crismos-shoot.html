<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crismos Shoot - –ö–æ–Ω—Ü–µ–ø—Ç –∏–≥—Ä—ã</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
        
        :root {
            --bg-dark: #0f0b15;
            --bg-card: #1a1625;
            --bg-hover: #252033;
            --primary: #8b5cf6;
            --primary-hover: #a78bfa;
            --accent: #f59e0b;
            --christmas-red: #dc2626;
            --christmas-green: #16a34a;
            --snow: #f0f9ff;
            --text-main: #ffffff;
            --text-sec: #94a3b8;
            --border: rgba(139, 92, 246, 0.2);
            --gradient-main: linear-gradient(135deg, #7c3aed, #db2777);
            --gradient-gold: linear-gradient(135deg, #f59e0b, #fbbf24);
            --gradient-christmas: linear-gradient(135deg, #dc2626, #16a34a);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 15% 25%, rgba(124, 58, 237, 0.15) 0%, transparent 45%),
                radial-gradient(circle at 85% 75%, rgba(220, 38, 38, 0.1) 0%, transparent 45%);
            color: var(--text-main);
            overflow-x: hidden;
            position: relative;
        }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–≥—Ä—ã */
        .game-header {
            text-align: center;
            padding: 40px 20px;
            background: var(--gradient-christmas);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(220, 38, 38, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .game-header::before {
            content: 'üéÑ';
            position: absolute;
            left: 10%;
            top: 50%;
            transform: translateY(-50%);
            font-size: 4rem;
            opacity: 0.3;
        }
        
        .game-header::after {
            content: 'üéÅ';
            position: absolute;
            right: 10%;
            top: 50%;
            transform: translateY(-50%);
            font-size: 4rem;
            opacity: 0.3;
        }
        
        .game-title {
            font-size: 3rem;
            font-weight: 900;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }
        
        .game-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ç–∞–±–æ–≤ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding-bottom: 5px;
        }
        
        .tab {
            padding: 12px 24px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .tab:hover {
            background: var(--bg-hover);
            border-color: var(--primary);
        }
        
        .tab.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        /* –°–µ–∫—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .content-section {
            display: none;
            animation: fadeIn 0.4s;
        }
        
        .content-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* –ò–≥—Ä–æ–≤–∞—è –∞—Ä–µ–Ω–∞ */
        .game-arena {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 20px;
            padding: 20px;
            min-height: 500px;
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .arena-canvas {
            width: 100%;
            height: 450px;
            background: 
                linear-gradient(to bottom, rgba(15, 11, 21, 0.7), rgba(26, 22, 37, 0.9)),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 450"><defs><linearGradient id="sky" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:%231a1f35;stop-opacity:1" /><stop offset="100%" style="stop-color:%230f0b15;stop-opacity:1" /></linearGradient></defs><rect fill="url(%23sky)" width="1200" height="450"/><circle cx="100" cy="80" r="40" fill="%23fbbf24" opacity="0.3"/><polygon points="900,350 920,320 940,350" fill="%2316a34a" opacity="0.4"/><polygon points="950,350 970,310 990,350" fill="%2316a34a" opacity="0.4"/><polygon points="1000,350 1020,330 1040,350" fill="%2316a34a" opacity="0.4"/><rect x="0" y="350" width="1200" height="100" fill="%23e0e7ff" opacity="0.1"/><ellipse cx="200" cy="100" rx="60" ry="20" fill="%23ffffff" opacity="0.1"/><ellipse cx="500" cy="120" rx="80" ry="25" fill="%23ffffff" opacity="0.08"/><ellipse cx="900" cy="90" rx="70" ry="22" fill="%23ffffff" opacity="0.09"/></svg>');
            background-size: cover;
            background-position: center;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(139, 92, 246, 0.3);
            box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.5);
        }
        
        /* –ò–≥—Ä–æ–∫ */
        .player {
            position: absolute;
            left: 10%;
            bottom: 20%;
            width: 80px;
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.3s;
        }
        
        .player-body {
            width: 60px;
            height: 80px;
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            border-radius: 10px 10px 20px 20px;
            position: relative;
            box-shadow: 0 5px 20px rgba(220, 38, 38, 0.5);
            border: 3px solid #fbbf24;
        }
        
        .player-body::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 8px;
            background: #fbbf24;
            border-radius: 50%;
            box-shadow: 
                0 12px 0 #fbbf24,
                0 24px 0 #fbbf24;
        }
        
        .player-body::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 15px;
            background: #fff;
            border-radius: 0 0 18px 18px;
        }
        
        .player-head {
            width: 40px;
            height: 40px;
            background: radial-gradient(circle at 30% 30%, #ffd7ba, #f4a460);
            border-radius: 50%;
            position: absolute;
            top: -20px;
            left: 10px;
            border: 3px solid #fff;
        }
        
        .player-head::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 10px;
            width: 5px;
            height: 5px;
            background: #000;
            border-radius: 50%;
            box-shadow: 10px 0 0 #000;
        }
        
        .player-head::after {
            content: '';
            position: absolute;
            top: 22px;
            left: 12px;
            width: 6px;
            height: 3px;
            background: #000;
            border-radius: 0 0 10px 10px;
        }
        
        .player-hat {
            width: 50px;
            height: 35px;
            background: linear-gradient(135deg, #dc2626, #991b1b);
            position: absolute;
            top: -50px;
            left: 5px;
            border-radius: 50% 50% 0 0;
            border: 3px solid #fff;
        }
        
        .player-hat::after {
            content: '‚≠ê';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.2rem;
        }
        
        .player-hat::before {
            content: '';
            position: absolute;
            bottom: -8px;
            left: -3px;
            right: -3px;
            height: 8px;
            background: #fff;
            border-radius: 4px;
        }
        
        .weapon {
            width: 50px;
            height: 20px;
            background: linear-gradient(90deg, #374151, #6b7280);
            border-radius: 5px;
            position: absolute;
            right: -30px;
            top: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }
        
        .weapon::before {
            content: '';
            width: 15px;
            height: 8px;
            background: #111;
            position: absolute;
            right: 0;
            top: 6px;
            border-radius: 2px;
        }
        
        /* –í—Ä–∞–≥–∏ - –ì—Ä–∏–Ω—á–∏ */
        .enemy {
            position: absolute;
            right: 10%;
            bottom: 20%;
            width: 80px;
            height: 100px;
            animation: enemyFloat 2s ease-in-out infinite;
        }
        
        .enemy.boss {
            width: 120px;
            height: 150px;
        }
        
        @keyframes enemyFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .grinch-body {
            width: 70px;
            height: 90px;
            background: linear-gradient(135deg, #16a34a 0%, #15803d 50%, #166534 100%);
            border-radius: 15px 15px 25px 25px;
            position: relative;
            box-shadow: 0 5px 20px rgba(22, 163, 74, 0.5);
            border: 2px solid #15803d;
        }
        
        .enemy.boss .grinch-body {
            width: 105px;
            height: 135px;
        }
        
        .grinch-body::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 30px;
            background: linear-gradient(135deg, #166534, #15803d);
            border-radius: 6px;
        }
        
        .grinch-face {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle at 30% 30%, #22c55e, #15803d);
            border-radius: 50%;
            position: absolute;
            top: 10px;
            left: 10px;
        }
        
        .enemy.boss .grinch-face {
            width: 75px;
            height: 75px;
        }
        
        .grinch-eyes {
            width: 12px;
            height: 16px;
            background: var(--christmas-red);
            position: absolute;
            top: 18px;
            left: 12px;
            border-radius: 50%;
            box-shadow: 18px 0 0 var(--christmas-red);
            animation: glowEyes 2s ease-in-out infinite;
        }
        
        @keyframes glowEyes {
            0%, 100% { box-shadow: 18px 0 0 var(--christmas-red), 0 0 5px #dc2626; }
            50% { box-shadow: 18px 0 0 var(--christmas-red), 0 0 15px #dc2626; }
        }
        
        .enemy.boss .grinch-eyes {
            width: 18px;
            height: 24px;
            left: 18px;
            box-shadow: 27px 0 0 var(--christmas-red);
        }
        
        .grinch-mouth {
            width: 25px;
            height: 12px;
            border: 3px solid #dc2626;
            border-top: none;
            border-radius: 0 0 15px 15px;
            position: absolute;
            top: 32px;
            left: 12px;
        }
        
        .enemy.boss .grinch-mouth {
            width: 38px;
            height: 18px;
            top: 48px;
            left: 18px;
        }
        
        .grinch-body::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 20px solid #15803d;
        }
        
        .enemy.dead {
            animation: enemyDeath 0.5s forwards;
        }
        
        @keyframes enemyDeath {
            0% { 
                opacity: 1; 
                transform: scale(1) rotate(0deg);
            }
            50% {
                opacity: 0.5;
                transform: scale(1.2) rotate(180deg);
            }
            100% { 
                opacity: 0; 
                transform: scale(0) rotate(360deg);
            }
        }
        
        /* –ü—É–ª–∏ */
        .bullet {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--accent);
            animation: bulletFly 1s linear;
        }
        
        @keyframes bulletFly {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç—ã –ø–æ–ø–∞–¥–∞–Ω–∏—è */
        .hit-effect {
            position: absolute;
            font-size: 2rem;
            animation: hitBurst 0.5s;
            pointer-events: none;
        }
        
        @keyframes hitBurst {
            from { 
                transform: scale(0.5);
                opacity: 1;
            }
            to { 
                transform: scale(2);
                opacity: 0;
            }
        }
        
        /* UI –∏–≥—Ä—ã */
        .game-ui {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .ui-panel {
            background: rgba(26, 22, 37, 0.8);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            flex: 1;
            min-width: 200px;
        }
        
        .ui-label {
            font-size: 0.9rem;
            color: var(--text-sec);
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .ui-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-main);
        }
        
        .health-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .health-fill {
            height: 100%;
            background: var(--gradient-christmas);
            transition: width 0.3s;
            box-shadow: 0 0 10px var(--christmas-red);
        }
        
        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 15px 30px;
            background: var(--primary);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.4);
        }
        
        .control-btn:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.6);
        }
        
        .control-btn:active {
            transform: translateY(0);
        }
        
        .control-btn.danger {
            background: var(--christmas-red);
        }
        
        .control-btn.success {
            background: var(--christmas-green);
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –æ—Ä—É–∂–∏—è */
        .weapon-select {
            padding: 15px;
            background: rgba(26, 22, 37, 0.5);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .weapon-select:hover {
            background: var(--bg-hover);
            border-color: var(--primary);
            transform: translateY(-3px);
        }
        
        .weapon-select.active {
            background: var(--primary);
            border-color: var(--primary);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.5);
        }
        
        .weapon-select:active {
            transform: translateY(0);
        }
        
        /* –°–µ—Ç–∫–∞ –æ—Ä—É–∂–∏—è */
        .weapons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .weapon-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .weapon-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }
        
        .weapon-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .weapon-icon {
            font-size: 4rem;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .weapon-name {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 8px;
            text-align: center;
        }
        
        .weapon-stats {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 15px;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }
        
        .stat-bar {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-left: 10px;
        }
        
        .stat-fill {
            height: 100%;
            background: var(--gradient-main);
        }
        
        /* –°–µ—Ç–∫–∞ –∫–µ–π—Å–æ–≤ */
        .cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .case-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .case-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-gold);
        }
        
        .case-card.legendary::before {
            background: linear-gradient(90deg, #f59e0b, #dc2626, #8b5cf6);
            animation: rainbowShift 3s linear infinite;
        }
        
        @keyframes rainbowShift {
            to { filter: hue-rotate(360deg); }
        }
        
        .case-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 40px rgba(139, 92, 246, 0.4);
        }
        
        .case-image {
            font-size: 5rem;
            margin-bottom: 15px;
            filter: drop-shadow(0 5px 15px rgba(139, 92, 246, 0.5));
        }
        
        .case-name {
            font-size: 1.3rem;
            font-weight: 800;
            margin-bottom: 10px;
        }
        
        .case-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .case-btn {
            width: 100%;
            padding: 12px;
            background: var(--gradient-main);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .case-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.5);
        }
        
        /* –°–∫–∏–Ω—ã */
        .skins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .skin-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .skin-card:hover {
            transform: scale(1.05);
            border-color: var(--primary);
        }
        
        .skin-card.equipped {
            border-color: var(--accent);
            background: rgba(245, 158, 11, 0.1);
        }
        
        .skin-preview {
            font-size: 4rem;
            margin-bottom: 10px;
        }
        
        .skin-name {
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .skin-rarity {
            font-size: 0.85rem;
            padding: 4px 8px;
            border-radius: 6px;
            display: inline-block;
            margin-top: 5px;
        }
        
        .rarity-common {
            background: rgba(148, 163, 184, 0.2);
            color: #94a3b8;
        }
        
        .rarity-rare {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
        }
        
        .rarity-legendary {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent);
        }
        
        /* –ë–∞—Ç–ª—ã –∫–µ–π—Å–æ–≤ */
        
        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 25px;
        }
        
        .info-card h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .info-card p {
            color: var(--text-sec);
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .info-card ul {
            list-style: none;
            padding-left: 0;
        }
        
        .info-card li {
            padding: 8px 0;
            color: var(--text-sec);
            padding-left: 25px;
            position: relative;
        }
        
        .info-card li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: bold;
        }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä */
        .progress-section {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            margin-top: 20px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--gradient-main);
            transition: width 0.5s;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.8);
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .game-title {
                font-size: 2rem;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .weapons-grid,
            .cases-grid,
            .skins-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .battle-players {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .vs-text {
                display: none;
            }
            
            .controls {
                justify-content: center;
            }
            
            .control-btn {
                flex: 1;
                min-width: 120px;
            }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
            color: var(--text-sec);
        }
        
        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        /* Particle System */
        .particle {
            position: absolute;
            pointer-events: none;
            border-radius: 50%;
            animation: particleFade 1s ease-out forwards;
        }
        @keyframes particleFade {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }
        
        .snow {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            pointer-events: none;
            animation: snowFall linear infinite;
        }
        @keyframes snowFall {
            to { transform: translateY(100vh); }
        }
        /* Recoil Class */
        .player.recoil {
            transform: translateX(-15px) !important;
        }

        /* Betting Overlay */
        .bet-overlay {
            position: absolute;
            inset: 0;
            background: rgba(15, 11, 21, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–≥—Ä—ã -->
        <div class="game-header">
            <h1 class="game-title">üéÑ Crismos Shoot üéÅ</h1>
            <p class="game-subtitle">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∞—Ä–∫–∞–¥–Ω—ã–π —à—É—Ç–µ—Ä —Å –ø—Ä–æ–∫–∞—á–∫–æ–π –∏ –∫–µ–π—Å–∞–º–∏</p>
        </div>
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="tabs">
            <div class="tab active" data-tab="gameplay">üéÆ –ì–µ–π–º–ø–ª–µ–π</div>
            <div class="tab" data-tab="weapons">üî´ –û—Ä—É–∂–∏–µ</div>
            <div class="tab" data-tab="skins">üëï –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è</div>
            <div class="tab" data-tab="mechanics">‚öôÔ∏è –ú–µ—Ö–∞–Ω–∏–∫–∏</div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è: –ì–µ–π–º–ø–ª–µ–π -->
        <div class="content-section active" id="gameplay">
            <div class="game-arena">
                <div class="bet-overlay" id="betOverlay">
                    <h2 style="font-size: 2.5rem; margin-bottom: 20px; color: #fbbf24;">–í—Ö–æ–¥ –≤ –∏–≥—Ä—É</h2>
                    <p style="font-size: 1.2rem; margin-bottom: 30px; color: #94a3b8;">–°—Ç–æ–∏–º–æ—Å—Ç—å —É—á–∞—Å—Ç–∏—è: <span style="color: #fbbf24; font-weight: bold;">100 –º–æ–Ω–µ—Ç</span></p>
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; margin-bottom: 30px; text-align: left;">
                        <div style="margin-bottom: 10px;">üèÜ <span style="color: #a78bfa;">–í–æ–ª–Ω–∞ 1-4:</span> –†–∞–∑–º–∏–Ω–∫–∞ (1 –º–æ–Ω–µ—Ç–∞/–∫–∏–ª–ª)</div>
                        <div style="margin-bottom: 10px;">üî• <span style="color: #fbbf24;">–í–æ–ª–Ω–∞ 5:</span> 5 –º–æ–Ω–µ—Ç –∑–∞ –∫–∏–ª–ª!</div>
                        <div>üíÄ <span style="color: #ef4444;">–í–æ–ª–Ω–∞ 6+:</span> 15 –º–æ–Ω–µ—Ç –∑–∞ –∫–∏–ª–ª!</div>
                    </div>
                    <button class="control-btn success" id="startGameBtn" style="font-size: 1.5rem; padding: 20px 50px;">–ò–ì–†–ê–¢–¨ (-100üí∞)</button>
                    <p id="betError" style="color: #ef4444; margin-top: 15px; display: none;">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!</p>
                </div>

                <div class="arena-canvas" id="gameCanvas">
                    <!-- –ò–≥—Ä–æ–∫ -->
                    <div class="player" id="player">
                        <div class="player-hat"></div>
                        <div class="player-head"></div>
                        <div class="player-body">
                            <div class="weapon"></div>
                        </div>
                    </div>
                    
                    <!-- –í—Ä–∞–≥ -->
                    <div class="enemy" id="enemy">
                        <div class="grinch-body">
                            <div class="grinch-face">
                                <div class="grinch-eyes"></div>
                                <div class="grinch-mouth"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- UI –∏–≥—Ä—ã -->
                <div class="game-ui">
                    <div class="ui-panel">
                        <div class="ui-label">–£—Ä–æ–≤–µ–Ω—å</div>
                        <div class="ui-value" id="levelDisplay">1</div>
                    </div>
                    <div class="ui-panel">
                        <div class="ui-label">–°—á–µ—Ç</div>
                        <div class="ui-value" id="scoreDisplay">0</div>
                    </div>
                    <div class="ui-panel">
                        <div class="ui-label">–ú–æ–Ω–µ—Ç—ã</div>
                        <div class="ui-value" id="coinsDisplay">üí∞ 500</div>
                    </div>
                    <div class="ui-panel" style="flex: 2;">
                        <div class="ui-label">–ó–¥–æ—Ä–æ–≤—å–µ</div>
                        <div class="health-bar">
                            <div class="health-fill" id="healthBar" style="width: 100%;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
            <div class="controls">
                <button class="control-btn" id="shootBtn">üî• –°—Ç—Ä–µ–ª—è—Ç—å</button>
                <button class="control-btn danger" id="reloadBtn">üîÑ –ü–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞</button>
            </div>
            
            <!-- –í—ã–±–æ—Ä –æ—Ä—É–∂–∏—è -->
            <div style="margin-top: 20px; background: var(--bg-card); border: 2px solid var(--border); border-radius: 16px; padding: 20px;">
                <h3 style="margin-bottom: 15px; font-size: 1.3rem;">‚öîÔ∏è –í—ã–±–æ—Ä –æ—Ä—É–∂–∏—è</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                    <button class="weapon-select active" data-weapon="pistol">
                        <div style="font-size: 2rem; margin-bottom: 5px;">üî´</div>
                        <div style="font-weight: 700;">–ü–∏—Å—Ç–æ–ª–µ—Ç</div>
                        <div style="font-size: 0.8rem; color: var(--text-sec);">–£—Ä–æ–Ω: 25</div>
                    </button>
                    <button class="weapon-select" data-weapon="rifle">
                        <div style="font-size: 2rem; margin-bottom: 5px;">üî•</div>
                        <div style="font-weight: 700;">–ê–≤—Ç–æ–º–∞—Ç</div>
                        <div style="font-size: 0.8rem; color: var(--text-sec);">–£—Ä–æ–Ω: 20</div>
                    </button>
                    <button class="weapon-select" data-weapon="shotgun">
                        <div style="font-size: 2rem; margin-bottom: 5px;">üí•</div>
                        <div style="font-weight: 700;">–î—Ä–æ–±–æ–≤–∏–∫</div>
                        <div style="font-size: 0.8rem; color: var(--text-sec);">–£—Ä–æ–Ω: 60</div>
                    </button>
                    <button class="weapon-select" data-weapon="laser">
                        <div style="font-size: 2rem; margin-bottom: 5px;">‚ö°</div>
                        <div style="font-weight: 700;">–õ–∞–∑–µ—Ä</div>
                        <div style="font-size: 0.8rem; color: var(--text-sec);">–£—Ä–æ–Ω: 80</div>
                    </button>
                </div>
            </div>
            
            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
            <div class="progress-section">
                <div class="progress-header">
                    <span style="font-weight: 700;">–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è</span>
                    <span style="color: var(--accent); font-weight: 700;">75%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 75%;"></div>
                    <div class="progress-text">750 / 1000 XP</div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è: –û—Ä—É–∂–∏–µ -->
        <div class="content-section" id="weapons">
            <h2 style="margin-bottom: 20px; font-size: 2rem;">–ê—Ä—Å–µ–Ω–∞–ª –æ—Ä—É–∂–∏—è</h2>
            <div class="weapons-grid">
                <div class="weapon-card">
                    <div class="weapon-icon">üî´</div>
                    <div class="weapon-name">–ü–∏—Å—Ç–æ–ª–µ—Ç</div>
                    <p style="color: var(--text-sec); font-size: 0.9rem;">–°—Ç–∞—Ä—Ç–æ–≤–æ–µ –æ—Ä—É–∂–∏–µ</p>
                    <div class="weapon-stats">
                        <div class="stat-row">
                            <span>–£—Ä–æ–Ω</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 40%;"></div></div>
                        </div>
                        <div class="stat-row">
                            <span>–°–∫–æ—Ä–æ—Å—Ç—å</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 60%;"></div></div>
                        </div>
                        <div class="stat-row">
                            <span>–û–±–æ–π–º–∞</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 30%;"></div></div>
                        </div>
                    </div>
                </div>
                
                <div class="weapon-card">
                    <div class="weapon-icon">üî•</div>
                    <div class="weapon-name">–ê–≤—Ç–æ–º–∞—Ç</div>
                    <p style="color: var(--text-sec); font-size: 0.9rem;">–ë—ã—Å—Ç—Ä–∞—è —Å—Ç—Ä–µ–ª—å–±–∞</p>
                    <div class="weapon-stats">
                        <div class="stat-row">
                            <span>–£—Ä–æ–Ω</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 50%;"></div></div>
                        </div>
                        <div class="stat-row">
                            <span>–°–∫–æ—Ä–æ—Å—Ç—å</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 90%;"></div></div>
                        </div>
                        <div class="stat-row">
                            <span>–û–±–æ–π–º–∞</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 70%;"></div></div>
                        </div>
                    </div>
                </div>
                
                <div class="weapon-card">
                    <div class="weapon-icon">üí•</div>
                    <div class="weapon-name">–î—Ä–æ–±–æ–≤–∏–∫</div>
                    <p style="color: var(--text-sec); font-size: 0.9rem;">–ë–æ–ª—å—à–æ–π —É—Ä–æ–Ω</p>
                    <div class="weapon-stats">
                        <div class="stat-row">
                            <span>–£—Ä–æ–Ω</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 95%;"></div></div>
                        </div>
                        <div class="stat-row">
                            <span>–°–∫–æ—Ä–æ—Å—Ç—å</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 30%;"></div></div>
                        </div>
                        <div class="stat-row">
                            <span>–û–±–æ–π–º–∞</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 40%;"></div></div>
                        </div>
                    </div>
                </div>
                
                <div class="weapon-card locked">
                    <div class="weapon-icon">‚ö°</div>
                    <div class="weapon-name">–õ–∞–∑–µ—Ä–Ω–æ–µ –æ—Ä—É–∂–∏–µ</div>
                    <p style="color: var(--text-sec); font-size: 0.9rem;">üîí –û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ 10 —É—Ä–æ–≤–Ω–µ</p>
                    <div class="weapon-stats">
                        <div class="stat-row">
                            <span>–£—Ä–æ–Ω</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 100%;"></div></div>
                        </div>
                        <div class="stat-row">
                            <span>–°–∫–æ—Ä–æ—Å—Ç—å</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 100%;"></div></div>
                        </div>
                        <div class="stat-row">
                            <span>–û–±–æ–π–º–∞</span>
                            <div class="stat-bar"><div class="stat-fill" style="width: 100%;"></div></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <h3 style="margin-top: 40px; margin-bottom: 20px; font-size: 1.5rem;">–ë—Ä–µ–ª–∫–∏ –Ω–∞ –æ—Ä—É–∂–∏–µ</h3>
            <div class="skins-grid">
                <div class="skin-card equipped">
                    <div class="skin-preview">üéÖ</div>
                    <div class="skin-name">–î–µ–¥ –ú–æ—Ä–æ–∑</div>
                    <div class="skin-rarity rarity-common">–û–±—ã—á–Ω—ã–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">‚≠ê</div>
                    <div class="skin-name">–ó–≤–µ–∑–¥–∞</div>
                    <div class="skin-rarity rarity-rare">–†–µ–¥–∫–∏–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">üíé</div>
                    <div class="skin-name">–ê–ª–º–∞–∑</div>
                    <div class="skin-rarity rarity-legendary">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">üî•</div>
                    <div class="skin-name">–û–≥–æ–Ω—å</div>
                    <div class="skin-rarity rarity-legendary">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π</div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è: –°–∫–∏–Ω—ã -->
        <div class="content-section" id="skins">
            <h2 style="margin-bottom: 20px; font-size: 2rem;">–°–∫–∏–Ω—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h2>
            <div class="skins-grid">
                <div class="skin-card equipped">
                    <div class="skin-preview">üéÖ</div>
                    <div class="skin-name">–°–∞–Ω—Ç–∞</div>
                    <div class="skin-rarity rarity-common">–û–±—ã—á–Ω—ã–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">üéÑ</div>
                    <div class="skin-name">–Å–ª–∫–∞</div>
                    <div class="skin-rarity rarity-rare">–†–µ–¥–∫–∏–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">‚õÑ</div>
                    <div class="skin-name">–°–Ω–µ–≥–æ–≤–∏–∫</div>
                    <div class="skin-rarity rarity-rare">–†–µ–¥–∫–∏–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">üéÅ</div>
                    <div class="skin-name">–ü–æ–¥–∞—Ä–æ–∫</div>
                    <div class="skin-rarity rarity-legendary">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">ü¶å</div>
                    <div class="skin-name">–û–ª–µ–Ω—å</div>
                    <div class="skin-rarity rarity-legendary">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">‚ùÑÔ∏è</div>
                    <div class="skin-name">–õ–µ–¥—è–Ω–æ–π</div>
                    <div class="skin-rarity rarity-legendary">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π</div>
                </div>
            </div>
            
            <h3 style="margin-top: 40px; margin-bottom: 20px; font-size: 1.5rem;">–°–∫–∏–Ω—ã –æ—Ä—É–∂–∏—è</h3>
            <div class="skins-grid">
                <div class="skin-card equipped">
                    <div class="skin-preview">üî´</div>
                    <div class="skin-name">–°—Ç–∞–Ω–¥–∞—Ä—Ç</div>
                    <div class="skin-rarity rarity-common">–û–±—ã—á–Ω—ã–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">üé®</div>
                    <div class="skin-name">–ì—Ä–∞—Ñ—Ñ–∏—Ç–∏</div>
                    <div class="skin-rarity rarity-rare">–†–µ–¥–∫–∏–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">‚ú®</div>
                    <div class="skin-name">–°–Ω–µ–∂–Ω—ã–π</div>
                    <div class="skin-rarity rarity-rare">–†–µ–¥–∫–∏–π</div>
                </div>
                <div class="skin-card">
                    <div class="skin-preview">üåü</div>
                    <div class="skin-name">–ó–æ–ª–æ—Ç–æ–π</div>
                    <div class="skin-rarity rarity-legendary">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π</div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è: –ö–µ–π—Å—ã -->
        <div class="content-section" id="cases">
            <div style="text-align: center; padding: 50px;">
                <h2 style="margin-bottom: 20px;">–ú–∞–≥–∞–∑–∏–Ω –ø–µ—Ä–µ–µ—Ö–∞–ª!</h2>
                <p style="margin-bottom: 30px; color: var(--text-sec);">–¢–µ–ø–µ—Ä—å –≤—Å–µ –∫–µ–π—Å—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–ë–∞—Ç—Ç–ª—ã"</p>
                <button class="control-btn" onclick="location.href='battles.html'">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–µ–π—Å–∞–º ‚ûî</button>
            </div>
        </div>

                <div class="case-card" data-case-type="background">
                    <div class="case-image">ÔøΩ</div>
                    <div class="case-name">–ö–µ–π—Å –§–æ–Ω</div>
                    <div class="case-price">üí∞ 199</div>
                    <button class="case-btn">–û—Ç–∫—Ä—ã—Ç—å</button>
                </div>
                <div class="case-card">
                    <div class="case-image">ÔøΩüéÅ</div>
                    <div class="case-name">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∫–µ–π—Å</div>
                    <div class="case-price">üí∞ 100</div>
                    <button class="case-btn">–û—Ç–∫—Ä—ã—Ç—å</button>
                </div>
                
                <div class="case-card">
                    <div class="case-image">üì¶</div>
                    <div class="case-name">–ë–∞–∑–æ–≤—ã–π –∫–µ–π—Å</div>
                    <div class="case-price">üí∞ 50</div>
                    <button class="case-btn">–û—Ç–∫—Ä—ã—Ç—å</button>
                </div>
                
                <div class="case-card">
                    <div class="case-image">üíé</div>
                    <div class="case-name">–ü—Ä–µ–º–∏—É–º –∫–µ–π—Å</div>
                    <div class="case-price">üí∞ 250</div>
                    <button class="case-btn">–û—Ç–∫—Ä—ã—Ç—å</button>
                </div>
                
                <div class="case-card legendary">
                    <div class="case-image">‚≠ê</div>
                    <div class="case-name">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–µ–π—Å</div>
                    <div class="case-price">üí∞ 500</div>
                    <button class="case-btn">–û—Ç–∫—Ä—ã—Ç—å</button>
                </div>
                
                <div class="case-card">
                    <div class="case-image">üéÑ</div>
                    <div class="case-name">–Å–ª–æ—á–Ω—ã–π –∫–µ–π—Å</div>
                    <div class="case-price">üí∞ 150</div>
                    <button class="case-btn">–û—Ç–∫—Ä—ã—Ç—å</button>
                </div>
                
                <div class="case-card">
                    <div class="case-image">‚ùÑÔ∏è</div>
                    <div class="case-name">–õ–µ–¥—è–Ω–æ–π –∫–µ–π—Å</div>
                    <div class="case-price">üí∞ 200</div>
                    <button class="case-btn">–û—Ç–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
            
            <div class="info-grid" style="margin-top: 40px;">
                <div class="info-card">
                    <h3>–ß—Ç–æ –≤ –∫–µ–π—Å–∞—Ö?</h3>
                    <ul>
                        <li>–°–∫–∏–Ω—ã –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</li>
                        <li>–°–∫–∏–Ω—ã –¥–ª—è –æ—Ä—É–∂–∏—è</li>
                        <li>–ë—Ä–µ–ª–∫–∏ (—Ä–µ–¥–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã)</li>
                        <li>–ú–æ–Ω–µ—Ç—ã –∏ –±—É—Å—Ç—ã</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h3>–†–µ–¥–∫–æ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç–æ–≤</h3>
                    <ul>
                        <li>–û–±—ã—á–Ω—ã–π (60% —à–∞–Ω—Å)</li>
                        <li>–†–µ–¥–∫–∏–π (30% —à–∞–Ω—Å)</li>
                        <li>–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π (10% —à–∞–Ω—Å)</li>
                    </ul>
                </div>
            </div>
        </div>
        
        
        <!-- –°–µ–∫—Ü–∏—è: –ú–µ—Ö–∞–Ω–∏–∫–∏ -->
        <div class="content-section" id="mechanics">
            <h2 style="margin-bottom: 20px; font-size: 2rem;">–ò–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏</h2>
            
            <div class="info-grid">
                <div class="info-card">
                    <h3>üéÆ –ì–µ–π–º–ø–ª–µ–π</h3>
                    <p>2D –∞—Ä–∫–∞–¥–Ω—ã–π —à—É—Ç–µ—Ä —Å –≤–æ–ª–Ω–∞–º–∏ –≤—Ä–∞–≥–æ–≤. –ò–≥—Ä–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–ª–µ–≤–∞, –≤—Ä–∞–≥–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å–ø—Ä–∞–≤–∞.</p>
                    <ul>
                        <li>–°—Ç—Ä–µ–ª—è–π—Ç–µ –ø–æ –≥—Ä–∏–Ω—á–∞–º</li>
                        <li>–ò–∑–±–µ–≥–∞–π—Ç–µ –∏—Ö –∞—Ç–∞–∫</li>
                        <li>–°–æ–±–∏—Ä–∞–π—Ç–µ –º–æ–Ω–µ—Ç—ã –∏ –Ω–∞–≥—Ä–∞–¥—ã</li>
                        <li>–ü—Ä–æ—Ö–æ–¥–∏—Ç–µ —É—Ä–æ–≤–Ω–∏</li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h3>‚¨ÜÔ∏è –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è</h3>
                    <p>–°–∏—Å—Ç–µ–º–∞ –æ–ø—ã—Ç–∞ –∏ —É—Ä–æ–≤–Ω–µ–π –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –º–æ—Ç–∏–≤–∞—Ü–∏–∏.</p>
                    <ul>
                        <li>XP –∑–∞ —É–±–∏–π—Å—Ç–≤–æ –≤—Ä–∞–≥–æ–≤</li>
                        <li>–ù–æ–≤–æ–µ –æ—Ä—É–∂–∏–µ –∫–∞–∂–¥—ã–µ N —É—Ä–æ–≤–Ω–µ–π</li>
                        <li>–£–ª—É—á—à–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫</li>
                        <li>–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h3>üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞</h3>
                    <p>–ò–≥—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞ ‚Äî –º–æ–Ω–µ—Ç—ã. –ü–æ–ª—É—á–∞–π—Ç–µ –∑–∞ –ø–æ–±–µ–¥—ã –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.</p>
                    <ul>
                        <li>–ü–æ–∫—É–ø–∫–∞ –∫–µ–π—Å–æ–≤</li>
                        <li>–£–ª—É—á—à–µ–Ω–∏—è –æ—Ä—É–∂–∏—è</li>
                        <li>–ü–æ–∫—É–ø–∫–∞ —Å–∫–∏–Ω–æ–≤</li>
                        <li>–£—á–∞—Å—Ç–∏–µ –≤ –±–∞—Ç–ª–∞—Ö</li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h3>üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è</h3>
                    <p>–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–ø—Ü–∏–π –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏ –æ—Ä—É–∂–∏—è.</p>
                    <ul>
                        <li>–°–∫–∏–Ω—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</li>
                        <li>–°–∫–∏–Ω—ã –æ—Ä—É–∂–∏—è</li>
                        <li>–ë—Ä–µ–ª–∫–∏ –Ω–∞ –æ—Ä—É–∂–∏–∏</li>
                        <li>–†–µ–¥–∫–æ—Å—Ç–Ω—ã–µ —É—Ä–æ–≤–Ω–∏</li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h3>üì¶ –°–∏—Å—Ç–µ–º–∞ –∫–µ–π—Å–æ–≤</h3>
                    <p>–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∫–µ–π—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Ä–∞–∑–Ω–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏.</p>
                    <ul>
                        <li>–†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∫–µ–π—Å–æ–≤</li>
                        <li>3 —É—Ä–æ–≤–Ω—è —Ä–µ–¥–∫–æ—Å—Ç–∏</li>
                        <li>–í–∏–∑—É–∞–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è</li>
                        <li>–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                    </ul>
                </div>
                
                <div class="info-card">
                </div>
            </div>
            
            <div class="info-card" style="margin-top: 30px;">
                <h3>üéØ –¶–µ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</h3>
                <p style="font-size: 1.1rem; line-height: 1.8;">
                    –°–æ–∑–¥–∞—Ç—å —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—É—é –±—Ä–∞—É–∑–µ—Ä–Ω—É—é –∏–≥—Ä—É —Å –ø—Ä–æ—Å—Ç—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º, —è—Ä–∫–æ–π –≥—Ä–∞—Ñ–∏–∫–æ–π –≤ –º—É–ª—å—Ç—è—à–Ω–æ–º —Å—Ç–∏–ª–µ, 
                    –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ –∏–≥—Ä—É –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.
                </p>
            </div>
        </div>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, arrayUnion, increment, runTransaction, collection, getDocs, query } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBVra2JN-C7-1b_Qa4cU8--XvJ83lymiM8",
            authDomain: "dropwin-8d94b.firebaseapp.com",
            projectId: "dropwin-8d94b",
            storageBucket: "dropwin-8d94b.firebasestorage.app",
            messagingSenderId: "988974289403",
            appId: "1:988974289403:web:886d34e6f65920a105fb5e",
            measurementId: "G-BK010MHN8N"
        };

        // Debug logging for Firebase
        console.log("Initializing Firebase...");
        let app, auth, db;
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            console.log("Firebase initialized successfully.");
        } catch (error) {
            console.error("Firebase initialization failed:", error);
            alert("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.");
        }

        // Game State
        let gameState = {
            isPlaying: false,
            score: 0,
            coins: 500, // Visual only until synced
            level: 1,
            xp: 0,
            xpToNext: 1000,
            health: 100,
            maxHealth: 100,
            wave: 1,
            enemiesKilled: 0,
            currentWeapon: 'pistol',
            inventory: {
                weapons: ['pistol'],
                skins: ['–°–∞–Ω—Ç–∞', '–°—Ç–∞–Ω–¥–∞—Ä—Ç'],
                cases: []
            },
            equipped: {
                agent: '–°–∞–Ω—Ç–∞',
                weapon: '–°—Ç–∞–Ω–¥–∞—Ä—Ç',
                bg: 'default'
            }
        };

        let enemies = [];
        let currentUser = null;
        let gameLoopInterval = null;

        // Configuration
        const weapons = {
            pistol: { damage: 25, icon: 'üî´', name: '–ü–∏—Å—Ç–æ–ª–µ—Ç', cooldown: 500 },
            rifle: { damage: 20, icon: 'üî•', name: '–ê–≤—Ç–æ–º–∞—Ç', cooldown: 150 },
            shotgun: { damage: 60, icon: 'üí•', name: '–î—Ä–æ–±–æ–≤–∏–∫', cooldown: 1000 },
            laser: { damage: 80, icon: '‚ö°', name: '–õ–∞–∑–µ—Ä', cooldown: 800 }
        };

        // DOM Elements
        const ui = {
            score: document.getElementById('scoreDisplay'),
            coins: document.getElementById('coinsDisplay'),
            level: document.getElementById('levelDisplay'),
            healthBar: document.getElementById('healthBar'),
            canvas: document.getElementById('gameCanvas'),
            player: document.getElementById('player'),
            shootBtn: document.getElementById('shootBtn'),
            reloadBtn: document.getElementById('reloadBtn'),
            betOverlay: document.getElementById('betOverlay'),
            startGameBtn: document.getElementById('startGameBtn'),
            betError: document.getElementById('betError')
        };

        // Auth & Save System
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                currentUser = user;
                console.log("User logged in:", user.uid);
                await loadProgress();
            } else {
                console.log('Guest mode');
                const localData = localStorage.getItem('crismos_save');
                if(localData) {
                    gameState = { ...gameState, ...JSON.parse(localData) };
                    updateUI();
                }
            }
        });

        async function loadProgress() {
            if (!currentUser) return;
            try {
                // Get global user data for balance
                const userDoc = await getDoc(doc(db, 'users', currentUser.uid));
                if (userDoc.exists()) {
                    gameState.coins = userDoc.data().balance || 0;
                }

                // Sync inventory from Battles/Global Inventory
                await syncInventory();

                const docRef = doc(db, 'users', currentUser.uid, 'games', 'crismos');
                const snap = await getDoc(docRef);
                if (snap.exists()) {
                    const data = snap.data();
                    // Don't overwrite coins from game save, use global balance
                    delete data.coins; 
                    
                    gameState = { ...gameState, ...data };
                    
                    // Re-sync skins to ensure we have latest from global
                    if (gameState.syncedSkins) {
                         gameState.inventory.skins = [...new Set([...gameState.inventory.skins, ...gameState.syncedSkins])];
                    }
                    
                    updateUI();
                    applyEquippedSkins();
                }
                renderSkins();
            } catch (e) { console.error('Load error', e); }
        }

        async function syncInventory() {
            if (!currentUser) return;
            try {
                // Read global inventory from user document (as per battles.html structure)
                const userDoc = await getDoc(doc(db, 'users', currentUser.uid));
                const ownedSkins = [];
                
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    if (userData.inventory && Array.isArray(userData.inventory)) {
                        userData.inventory.forEach(item => {
                            if (item.name) ownedSkins.push(item.name);
                        });
                    }
                }

                gameState.syncedSkins = ownedSkins;
                gameState.inventory.skins = [...new Set([...gameState.inventory.skins, ...ownedSkins])];
                console.log("Synced skins:", gameState.inventory.skins);
            } catch (e) {
                console.error("Inventory sync error:", e);
            }
        }

        async function saveProgress() {
            if (!currentUser) {
                localStorage.setItem('crismos_save', JSON.stringify(gameState));
                return;
            }
            try {
                const docRef = doc(db, 'users', currentUser.uid, 'games', 'crismos');
                await setDoc(docRef, {
                    ...gameState,
                    lastPlayed: new Date()
                }, { merge: true });
            } catch (e) { console.error('Save error', e); }
        }

        // Betting & Start Logic
        ui.startGameBtn.addEventListener('click', async () => {
            if (!currentUser) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã –∏–≥—Ä–∞—Ç—å –Ω–∞ –º–æ–Ω–µ—Ç—ã.");
                return;
            }

            if (gameState.coins < 100) {
                ui.betError.style.display = 'block';
                return;
            }

            ui.startGameBtn.disabled = true;
            ui.startGameBtn.textContent = "–ó–∞–≥—Ä—É–∑–∫–∞...";

            try {
                // Deduct 100 coins using transaction
                await runTransaction(db, async (transaction) => {
                    const userRef = doc(db, 'users', currentUser.uid);
                    const userDoc = await transaction.get(userRef);
                    if (!userDoc.exists()) throw "User not found";
                    
                    const newBalance = (userDoc.data().balance || 0) - 100;
                    if (newBalance < 0) throw "Insufficient funds";
                    
                    transaction.update(userRef, { balance: newBalance });
                    gameState.coins = newBalance;
                });

                ui.betOverlay.style.display = 'none';
                startGame();

            } catch (e) {
                console.error("Bet transaction failed:", e);
                ui.betError.textContent = "–û—à–∏–±–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: " + e;
                ui.betError.style.display = 'block';
                ui.startGameBtn.disabled = false;
                ui.startGameBtn.textContent = "–ò–ì–†–ê–¢–¨ (-100üí∞)";
            }
        });

        function startGame() {
            gameState.isPlaying = true;
            gameState.health = 100;
            gameState.wave = 1;
            gameState.score = 0;
            enemies.forEach(e => e.element.remove());
            enemies = [];
            updateUI();
            
            // Start spawns
            setTimeout(() => spawnEnemy(), 1000);
        }

        // Game Logic
        function updateUI() {
            ui.score.textContent = gameState.score;
            ui.coins.textContent = 'üí∞ ' + Math.floor(gameState.coins);
            ui.level.textContent = '–í–æ–ª–Ω–∞ ' + gameState.wave; // Show wave instead of level or both
            
            const hpPct = (gameState.health / gameState.maxHealth) * 100;
            ui.healthBar.style.width = hpPct + '%';
            
            // Unlock weapons logic...
            document.querySelectorAll('.weapon-card').forEach(card => {
                if(card.classList.contains('locked') && gameState.level >= 10) {
                    card.classList.remove('locked');
                    card.querySelector('p').textContent = '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ';
                }
            });
        }

        function createParticles(x, y, color, count = 10) {
            for(let i=0; i<count; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                p.style.background = color;
                p.style.width = (Math.random() * 6 + 2) + 'px';
                p.style.height = p.style.width;
                
                const angle = Math.random() * Math.PI * 2;
                const dist = Math.random() * 100 + 20;
                p.style.setProperty('--tx', Math.cos(angle) * dist + 'px');
                p.style.setProperty('--ty', Math.sin(angle) * dist + 'px');
                
                ui.canvas.appendChild(p);
                setTimeout(() => p.remove(), 1000);
            }
        }

        function spawnEnemy(isBoss = false) {
            if (!gameState.isPlaying) return;

            const enemy = document.createElement('div');
            enemy.className = isBoss ? 'enemy boss' : 'enemy';
            enemy.style.right = Math.random() * 20 + 5 + '%';
            enemy.style.bottom = Math.random() * 30 + 15 + '%';
            enemy.innerHTML = `
                <div class="grinch-body">
                    <div class="grinch-face">
                        <div class="grinch-eyes"></div>
                        <div class="grinch-mouth"></div>
                    </div>
                </div>
            `;
            
            // Difficulty scaling
            const hpMult = 1 + (gameState.wave * 0.2);
            
            const enemyData = {
                element: enemy,
                health: isBoss ? 300 * hpMult : 100 * hpMult,
                maxHealth: isBoss ? 300 * hpMult : 100 * hpMult,
                isBoss: isBoss
            };
            
            enemies.push(enemyData);
            ui.canvas.appendChild(enemy);
            
            // Enemy attack loop
            const attackInterval = setInterval(() => {
                if(!enemy.isConnected || !gameState.isPlaying) { clearInterval(attackInterval); return; }
                
                // Aggressiveness increases with wave
                const attackChance = 0.3 + (gameState.wave * 0.05); 

                if(Math.random() < attackChance) {
                    // Attack
                    const snowball = document.createElement('div');
                    snowball.className = 'bullet';
                    snowball.style.background = 'white';
                    const rect = enemy.getBoundingClientRect();
                    const arenaRect = ui.canvas.getBoundingClientRect();
                    snowball.style.left = (rect.left - arenaRect.left) + 'px';
                    snowball.style.top = (rect.top - arenaRect.top + 30) + 'px';
                    snowball.style.transition = 'all 1s linear';
                    ui.canvas.appendChild(snowball);
                    
                    setTimeout(() => {
                        snowball.style.left = '10%';
                        snowball.style.top = '70%'; 
                    }, 50);
                    
                    setTimeout(() => {
                        if(Math.random() > 0.4) { // 60% hit chance
                            gameState.health -= 5 + (gameState.wave); // Damage increases with wave
                            updateUI();
                            ui.player.style.filter = 'brightness(0.5) sepia(1) hue-rotate(-50deg) saturate(5)';
                            setTimeout(() => ui.player.style.filter = '', 200);
                            if(gameState.health <= 0) gameOver();
                        }
                        snowball.remove();
                    }, 1000);
                }
            }, 3000 - (gameState.wave * 100)); // Attack faster each wave
            
            return enemyData;
        }

        function gameOver() {
            gameState.isPlaying = false;
            alert('Game Over! –í—ã –ø–æ–≥–∏–±–ª–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –∑–∞ 100 –º–æ–Ω–µ—Ç.');
            gameState.health = 100;
            enemies.forEach(e => e.element.remove());
            enemies = [];
            gameState.wave = 1;
            ui.betOverlay.style.display = 'flex';
            ui.startGameBtn.disabled = false;
            ui.startGameBtn.textContent = "–ò–ì–†–ê–¢–¨ (-100üí∞)";
            updateUI();
            saveProgress();
        }

        // Shooting Logic
        let lastShot = 0;
        ui.shootBtn.addEventListener('click', () => {
            if (!gameState.isPlaying) return;

            const now = Date.now();
            const weapon = weapons[gameState.currentWeapon];
            if(now - lastShot < weapon.cooldown) return;
            lastShot = now;

            // Recoil animation
            ui.player.classList.add('recoil');
            setTimeout(() => ui.player.classList.remove('recoil'), 100);

            if (enemies.length === 0) {
                // Spawn wave
                // Logic: Wave 6 is hard, reduce count?
                // User said: "too many grinches on wave 6".
                
                let count = gameState.wave + 1;
                if (gameState.wave >= 6) {
                    count = 4; // Cap at 4 for wave 6+ to make it manageable but keep them strong
                }
                
                for(let i=0; i<count; i++) {
                    setTimeout(() => spawnEnemy(i===0 && gameState.wave % 5 === 0), i * 800);
                }
                return;
            }

            // Shoot Projectile Visual
            const bullet = document.createElement('div');
            bullet.className = 'bullet';
            bullet.style.left = '15%';
            bullet.style.bottom = '30%';
            ui.canvas.appendChild(bullet);

            // Tracer Visual
            const tracer = document.createElement('div');
            tracer.className = 'tracer';
            tracer.style.left = '10%';
            tracer.style.bottom = '25%';
            ui.canvas.appendChild(tracer);
            setTimeout(() => tracer.remove(), 100);

            // Find target
            const target = enemies[0];
            
            setTimeout(async () => {
                const rect = target.element.getBoundingClientRect();
                const arenaRect = ui.canvas.getBoundingClientRect();
                
                createParticles(rect.left - arenaRect.left + 40, rect.top - arenaRect.top + 40, '#16a34a', 8);
                
                const dmg = weapon.damage;
                target.health -= dmg;
                
                const floatText = document.createElement('div');
                floatText.textContent = '-' + dmg;
                floatText.style.position = 'absolute';
                floatText.style.color = 'white';
                floatText.style.fontWeight = 'bold';
                floatText.style.left = (rect.left - arenaRect.left) + 'px';
                floatText.style.top = (rect.top - arenaRect.top - 20) + 'px';
                floatText.style.animation = 'bulletFly 1s forwards';
                ui.canvas.appendChild(floatText);
                setTimeout(() => floatText.remove(), 1000);

                if(target.health <= 0) {
                    target.element.classList.add('dead');
                    setTimeout(() => target.element.remove(), 500);
                    enemies.shift();
                    
                    // REWARD LOGIC
                    let reward = 0;
                    if (gameState.wave >= 6) {
                        reward = 15;
                    } else if (gameState.wave === 5) {
                        reward = 5;
                    } else {
                        reward = 1; // Minimal reward for early waves
                    }
                    
                    if (target.isBoss) reward *= 2;

                    // Add reward to global balance via Transaction to be safe, or just local optimistic update
                    // For performance, local update + periodic save is better, but for "casino" feel, maybe immediate?
                    // Let's do local + save.
                    gameState.score += reward;
                    gameState.coins += reward;
                    
                    // Sync balance to Firestore
                    if (currentUser) {
                         const userRef = doc(db, 'users', currentUser.uid);
                         updateDoc(userRef, {
                             balance: increment(reward)
                         }).catch(console.error);
                    }

                    gameState.xp += 10;
                    
                    if(gameState.xp >= gameState.xpToNext) {
                        gameState.level++;
                        gameState.xp = 0;
                        gameState.xpToNext *= 1.2;
                        // alert('Level Up! ' + gameState.level);
                    }
                    
                    if(enemies.length === 0) {
                        gameState.wave++;
                        // Wave completion bonus?
                        // saveProgress();
                    }
                }
                
                updateUI();
                bullet.remove();
            }, 100); // Faster bullet hit
        });

        // Tab Switching
        const tabs = document.querySelectorAll('.tab');
        const sections = document.querySelectorAll('.content-section');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                sections.forEach(s => s.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tab.getAttribute('data-tab')).classList.add('active');
            });
        });

        // Weapon Select
        document.querySelectorAll('.weapon-select').forEach(btn => {
            btn.addEventListener('click', () => {
                const w = btn.getAttribute('data-weapon');
                document.querySelectorAll('.weapon-select').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                gameState.currentWeapon = w;
                gameState.equipped.weapon = w;
                saveProgress();
            });
        });

        // Skins & Customization
        const ALL_SKINS = {
            agent: [
                {name: '–°–∞–Ω—Ç–∞', icon: 'üéÖ', rarity: 'common'},
                {name: '–Å–ª–∫–∞', icon: 'üéÑ', rarity: 'rare'},
                {name: '–°–Ω–µ–≥–æ–≤–∏–∫', icon: '‚õÑ', rarity: 'rare'},
                {name: '–ü–æ–¥–∞—Ä–æ–∫', icon: 'üéÅ', rarity: 'legendary'},
                {name: '–û–ª–µ–Ω—å', icon: 'ü¶å', rarity: 'legendary'},
                {name: '–õ–µ–¥—è–Ω–æ–π', icon: '‚ùÑÔ∏è', rarity: 'legendary'},
                {name: '–ê–≥–µ–Ω—Ç 007', icon: 'üïµÔ∏è', rarity: 'rare'},
                {name: '–°–ø–µ—Ü–Ω–∞–∑', icon: 'üëÆ', rarity: 'rare'},
                {name: '–í–∞–º–ø–∏—Ä', icon: 'üßõ', rarity: 'legendary'},
                {name: '–ó–æ–º–±–∏', icon: 'üßü', rarity: 'legendary'},
                {name: '–ü—Ä–∏—à–µ–ª–µ—Ü', icon: 'üëΩ', rarity: 'legendary'}
            ],
            weapon: [
                {name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç', icon: 'üî´', rarity: 'common'},
                {name: '–ì—Ä–∞—Ñ—Ñ–∏—Ç–∏', icon: 'üé®', rarity: 'rare'},
                {name: '–°–Ω–µ–∂–Ω—ã–π', icon: '‚ú®', rarity: 'rare'},
                {name: '–ó–æ–ª–æ—Ç–æ–π', icon: 'üåü', rarity: 'legendary'},
                {name: 'Camo Pistol', icon: 'üî´', rarity: 'common'},
                {name: 'Fire Rifle', icon: 'üî•', rarity: 'rare'},
                {name: 'Ice Sniper', icon: '‚ùÑÔ∏è', rarity: 'rare'},
                {name: 'Thunder Shotgun', icon: '‚ö°', rarity: 'legendary'},
                {name: 'Rainbow Knife', icon: 'üåà', rarity: 'legendary'}
            ],
            bg: [
                {name: 'default', icon: 'üåå', label: '–ù–æ—á—å', rarity: 'common'},
                {name: 'snow', icon: 'üå®Ô∏è', label: '–°–Ω–µ–≥–æ–ø–∞–¥', rarity: 'rare'},
                {name: 'sunset', icon: 'üåÖ', label: '–ó–∞–∫–∞—Ç', rarity: 'rare'},
                {name: 'cyber', icon: 'ü§ñ', label: '–ö–∏–±–µ—Ä–ø–∞–Ω–∫', rarity: 'legendary'}
            ]
        };

        function renderSkins() {
            const renderCat = (type, containerId) => {
                const container = document.getElementById(containerId);
                if(!container) return;
                container.innerHTML = '';
                
                const list = ALL_SKINS[type] || [];
                list.forEach(skin => {
                    const isOwned = (gameState.inventory.skins && gameState.inventory.skins.includes(skin.name)) || 
                                    (type === 'bg' && skin.name === 'default') || 
                                    (type === 'agent' && skin.name === '–°–∞–Ω—Ç–∞') ||
                                    (type === 'weapon' && skin.name === '–°—Ç–∞–Ω–¥–∞—Ä—Ç');
                    
                    const isEquipped = (type === 'agent' && gameState.equipped.agent === skin.name) ||
                                       (type === 'weapon' && gameState.equipped.weapon_skin === skin.name) ||
                                       (type === 'bg' && gameState.equipped.bg === skin.name);
                    
                    const card = document.createElement('div');
                    card.className = `skin-card ${isEquipped ? 'equipped' : ''} ${!isOwned ? 'locked' : ''}`;
                    card.innerHTML = `
                        <div class="skin-preview">${skin.icon}</div>
                        <div class="skin-name">${skin.label || skin.name}</div>
                        <div class="skin-rarity rarity-${skin.rarity}">${skin.rarity === 'common' ? '–û–±—ã—á–Ω—ã–π' : (skin.rarity === 'rare' ? '–†–µ–¥–∫–∏–π' : '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π')}</div>
                    `;
                    
                    if (isOwned) {
                        card.onclick = () => equipSkin(type, skin.name);
                    } else {
                        card.onclick = () => alert('–≠—Ç–æ—Ç —Å–∫–∏–Ω –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω! –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∫–µ–π—Å—ã –≤ —Ä–∞–∑–¥–µ–ª–µ Battles —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –µ–≥–æ.');
                    }
                    
                    container.appendChild(card);
                });
            };

            renderCat('agent', 'charSkinsGrid');
            renderCat('weapon', 'weaponSkinsGrid');
            renderCat('bg', 'bgSkinsGrid');
        }

        function equipSkin(type, name) {
            if (type === 'agent') {
                gameState.equipped.agent = name;
            } else if (type === 'weapon') {
                gameState.equipped.weapon_skin = name;
            } else if (type === 'bg') {
                gameState.equipped.bg = name;
            }
            saveProgress();
            renderSkins();
            applyEquippedSkins();
        }

        function applyEquippedSkins() {
            const p = document.getElementById('player');
            if(!p) return;
            
            const agentSkin = ALL_SKINS.agent.find(s => s.name === gameState.equipped.agent);
            if (agentSkin) {
                p.querySelector('.player-head').innerHTML = `<div style="position:absolute; top:-10px; left:-5px; font-size:30px;">${agentSkin.icon}</div>`;
                p.querySelector('.player-hat').style.display = 'none'; 
            } else {
                 p.querySelector('.player-head').innerHTML = '';
                 p.querySelector('.player-hat').style.display = 'block';
            }

            const canvas = document.getElementById('gameCanvas');
            if(gameState.equipped.bg === 'snow') {
                canvas.style.filter = 'brightness(1.2) hue-rotate(180deg)';
            } else if (gameState.equipped.bg === 'sunset') {
                canvas.style.filter = 'sepia(0.5) hue-rotate(-30deg)';
            } else if (gameState.equipped.bg === 'cyber') {
                 canvas.style.filter = 'invert(1) hue-rotate(180deg) contrast(1.2)';
            } else {
                canvas.style.filter = 'none';
            }
        }
        
        renderSkins();

        // Snow Effect
        setInterval(() => {
            const snow = document.createElement('div');
            snow.className = 'snow';
            snow.style.left = Math.random() * 100 + '%';
            snow.style.top = '-10px';
            snow.style.width = Math.random() * 5 + 2 + 'px';
            snow.style.height = snow.style.width;
            snow.style.animationDuration = Math.random() * 3 + 2 + 's';
            ui.canvas.appendChild(snow);
            setTimeout(() => snow.remove(), 5000);
        }, 200);

    </script>
</body>
</html>
