<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>DropWin Casino</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .games-list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 18px 14px;
      padding: 20px 16px;
      max-width: 560px;
      margin: 0 auto;
    }

    .game-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 16px 12px 20px;
      border-radius: 20px;
      background: rgba(30, 27, 71, 0.75);
      border: 2px solid rgba(52, 211, 153, 0.25);
      transition: all 0.28s ease;
      cursor: pointer;
      color: white;
      text-decoration: none;
      box-shadow: 0 6px 16px rgba(0,0,0,0.45);
      overflow: hidden;
    }

    .game-icon:hover {
      transform: translateY(-8px);
      border-color: #34d399;
      box-shadow: 0 16px 36px rgba(16, 185, 129, 0.5);
    }

    .game-icon .image-container {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      min-height: 140px;
    }

    .game-icon img {
      max-width: 100%;
      max-height: 160px;
      width: auto;
      height: auto;
      object-fit: contain;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,0.65));
    }

    /* –ö–æ—Å—Ç–∏ ‚Äî –∫—Ä—É–ø–Ω–µ–µ */
    .game-icon.dice img {
      max-height: 190px;
    }

    /* –ë–∞—Ç—Ç–ª—ã ‚Äî —Ç–æ–∂–µ –∫—Ä—É–ø–Ω–µ–µ */
    .game-icon.battles img {
      max-height: 185px;
    }

    .game-icon-name {
      font-size: 1.15rem;
      font-weight: 700;
      text-align: center;
      margin-top: 12px;
      width: 100%;
    }

    @media (max-width: 420px) {
      .games-list {
        gap: 16px 12px;
        padding: 18px 14px;
      }
      .game-icon img {
        max-height: 145px;
      }
      .game-icon.dice img {
        max-height: 170px;
      }
      .game-icon.battles img {
        max-height: 165px;
      }
      .game-icon-name {
        font-size: 1.05rem;
      }
    }

    @media (max-width: 360px) {
      .game-icon img {
        max-height: 130px;
      }
      .game-icon.dice img {
        max-height: 155px;
      }
      .game-icon.battles img {
        max-height: 150px;
      }
    }
  </style>
</head>
<body>
<div class="particles" id="particles"></div>

<div class="header">
  <div class="logo">üíé DROPWIN</div>
  <div class="balance-container">
    <div class="balance">üí∞ <span id="balance">0</span>‚ÇΩ</div>
    <button class="auth-btn" id="authBtn">–í–æ–π—Ç–∏</button>
  </div>
</div>

<div class="content">
  <div class="games-list">

    <div class="game-icon" onclick="location.href='games/slots.html'">
      <div class="image-container">
        <img src="images/index/slots.png" alt="–°–ª–æ—Ç—ã">
      </div>
      <div class="game-icon-name">–°–ª–æ—Ç—ã</div>
    </div>

    <div class="game-icon" onclick="location.href='games/miner.html'">
      <div class="image-container">
        <img src="images/index/miner.png" alt="–ú–∏–Ω—ë—Ä">
      </div>
      <div class="game-icon-name">–ú–∏–Ω—ë—Ä</div>
    </div>

    <div class="game-icon" onclick="location.href='games/roulette.html'">
      <div class="image-container">
        <img src="images/index/roulette.png" alt="–†—É–ª–µ—Ç–∫–∞">
      </div>
      <div class="game-icon-name">–†—É–ª–µ—Ç–∫–∞</div>
    </div>

    <div class="game-icon" onclick="location.href='games/cards.html'">
      <div class="image-container">
        <img src="images/index/cards.png" alt="–ö–∞—Ä—Ç—ã">
      </div>
      <div class="game-icon-name">–ö–∞—Ä—Ç—ã</div>
    </div>

    <div class="game-icon dice" onclick="location.href='games/dice.html'">
      <div class="image-container">
        <img src="images/index/dice.png" alt="–ö–æ—Å—Ç–∏">
      </div>
      <div class="game-icon-name">–ö–æ—Å—Ç–∏</div>
    </div>

    <div class="game-icon" onclick="location.href='games/crash.html'">
      <div class="image-container">
        <img src="images/index/crash.png" alt="–ö—Ä–∞—à">
      </div>
      <div class="game-icon-name">–ö—Ä–∞—à</div>
    </div>

    <div class="game-icon" onclick="location.href='games/plinko.html'">
      <div class="image-container">
        <img src="images/index/plinko.png" alt="Plinko">
      </div>
      <div class="game-icon-name">Plinko</div>
    </div>

    <div class="game-icon" onclick="location.href='games/dino-throw.html'">
      <div class="image-container">
        <img src="images/index/dino-throw.png" alt="Dino Throw">
      </div>
      <div class="game-icon-name">Dino Throw</div>
    </div>

    <div class="game-icon" onclick="location.href='crypto.html'">
      <div class="image-container">
        <img src="images/index/crypto.png" alt="–ê–∫—Ü–∏–∏ –ö—Ä–∏–ø—Ç–∞">
      </div>
      <div class="game-icon-name">–ê–∫—Ü–∏–∏: –ö—Ä–∏–ø—Ç–∞</div>
    </div>

    <div class="game-icon battles" onclick="location.href='games/battles.html'">
      <div class="image-container">
        <img src="images/index/battles.png" alt="–ë–∞—Ç—Ç–ª—ã –ö–µ–π—Å–æ–≤">
      </div>
      <div class="game-icon-name">–ë–∞—Ç—Ç–ª—ã –ö–µ–π—Å–æ–≤</div>
    </div>

  </div>
</div>

<div class="nav">
  <button class="nav-btn active"><span>üè†</span><span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span></button>
  <button class="nav-btn" onclick="location.href='profile.html'"><span>üë§</span><span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span></button>
  <button class="nav-btn" onclick="location.href='register.html'"><span>üîë</span><span class="nav-label">–í—Ö–æ–¥</span></button>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBVra2JN-C7-1b_Qa4cU8--XvJ83lymiM8",
    authDomain: "dropwin-8d94b.firebaseapp.com",
    projectId: "dropwin-8d94b",
    storageBucket: "dropwin-8d94b.firebasestorage.app",
    messagingSenderId: "988974289403",
    appId: "1:988974289403:web:886d34e6f65920a105fb5e",
    measurementId: "G-BK010MHN8N"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  function createParticles() {
    const container = document.getElementById('particles');
    for (let i = 0; i < 40; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      p.style.width = p.style.height = Math.random() * 3 + 1 + 'px';
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = Math.random() * 15 + 10 + 's';
      p.style.animationDelay = Math.random() * 5 + 's';
      container.appendChild(p);
    }
  }
  createParticles();

  let currentUser = null;

  function loadCurrentUser() {
    onAuthStateChanged(auth, (user) => {
      if (user) {
        getDoc(doc(db, 'users', user.uid)).then((docSnap) => {
          if (docSnap.exists()) {
            currentUser = docSnap.data();
            document.getElementById('balance').textContent = currentUser.balance || 0;
            document.getElementById('authBtn').textContent = currentUser.isGuest ? '–ì–æ—Å—Ç—å' : currentUser.username;
            document.getElementById('authBtn').onclick = () => location.href = 'profile.html';
          } else {
            document.getElementById('balance').textContent = '0';
            document.getElementById('authBtn').textContent = '–í–æ–π—Ç–∏';
            document.getElementById('authBtn').onclick = () => location.href = 'register.html';
          }
        }).catch((error) => {
          console.error('Error loading user:', error);
        });
      } else {
        const username = localStorage.getItem('dropwin_current_username');
        if (username === '–ì–æ—Å—Ç—å') {
          const users = JSON.parse(localStorage.getItem('dropwin_users')) || [];
          currentUser = users.find(u => u.username === username);
          if (currentUser) {
            document.getElementById('balance').textContent = currentUser.balance || 0;
            document.getElementById('authBtn').textContent = '–ì–æ—Å—Ç—å';
            document.getElementById('authBtn').onclick = () => location.href = 'profile.html';
          }
        } else {
          document.getElementById('balance').textContent = '0';
          document.getElementById('authBtn').textContent = '–í–æ–π—Ç–∏';
          document.getElementById('authBtn').onclick = () => location.href = 'register.html';
        }
      }
    });
  }

  document.addEventListener('DOMContentLoaded', loadCurrentUser);
</script>
</body>
</html>
