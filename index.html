<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>DropWin - –õ—É—á—à–∏–µ –∫–µ–π—Å—ã –∏ –∏–≥—Ä—ã</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Live Feed Strip -->
<div class="live-feed">
  <div class="live-feed-track">
    <!-- Set 1 -->
    <div class="live-item gold"><img src="images/index/inventory.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/battles.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/crash.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/dice.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/miner.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/roulette.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/slots.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/inventory.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/battles.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/crash.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/dice.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/miner.png" alt="Item"></div>
    
    <!-- Set 2 -->
    <div class="live-item gold"><img src="images/index/inventory.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/battles.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/crash.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/dice.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/miner.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/roulette.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/slots.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/inventory.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/battles.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/crash.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/dice.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/miner.png" alt="Item"></div>

    <!-- Set 3 -->
    <div class="live-item gold"><img src="images/index/inventory.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/battles.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/crash.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/dice.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/miner.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/roulette.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/slots.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/inventory.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/battles.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/crash.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/dice.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/miner.png" alt="Item"></div>

    <!-- Set 4 -->
    <div class="live-item gold"><img src="images/index/inventory.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/battles.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/crash.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/dice.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/miner.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/roulette.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/slots.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/inventory.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/battles.png" alt="Item"></div>
    <div class="live-item gold"><img src="images/index/crash.png" alt="Item"></div>
    <div class="live-item purple"><img src="images/index/dice.png" alt="Item"></div>
    <div class="live-item red"><img src="images/index/miner.png" alt="Item"></div>
  </div>
</div>

<!-- Header -->
<header class="header">
  <div class="header-left">
    <div class="logo" onclick="location.href='index.html'" style="cursor: pointer;">üíé DROP<span>WIN</span></div>
    <nav class="main-nav">
      <a href="inventory.html">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</a>
      <a href="leaderboard.html">–¢–æ–ø –ò–≥—Ä–æ–∫–æ–≤</a>
      <a href="freebet.html">–ë–æ–Ω—É—Å—ã</a>
      <a href="https://t.me/DropWinHelp_bot" target="_blank">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
    </nav>
  </div>
  
  <div class="header-right">
    <div class="balance-box">
      <span id="balance">0</span> ‚ÇΩ
      <button class="add-funds-btn" onclick="location.href='dep.html'">+</button>
    </div>
    <!-- Auth Button / Profile -->
    <button class="btn" id="authBtn" style="width: auto; padding: 8px 16px; font-size: 0.9rem;">–í–æ–π—Ç–∏</button>
  </div>
</header>

<!-- Hero Section -->
<div class="hero">
  <div class="hero-banner" style="position: relative; overflow: hidden; padding: 24px; min-height: 200px; border-radius: 16px;">
    <!-- Background Image Layer -->
    <div style="position: absolute; inset: 0; z-index: 0;">
       <img src="images/calendar.png" onerror="this.src='images/case-bg.jpg'" alt="Calendar" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.6;">
       <div style="position: absolute; inset: 0; background: linear-gradient(to right, rgba(19, 17, 26, 0.9), rgba(19, 17, 26, 0.4));"></div>
    </div>
    
    <div style="position: relative; z-index: 1;">
        <div class="hero-title">–ü—Ä–∏–∑–æ–≤–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å</div>
        <div class="hero-subtitle">–ó–∞—Ö–æ–¥–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∏ –ø–æ–ª—É—á–∞–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –±–æ–Ω—É—Å—ã!</div>
        <button class="hero-btn" onclick="location.href='calendar.html'">–ü–µ—Ä–µ–π—Ç–∏</button>
    </div>
  </div>
  
  <div class="promo-grid">
    <div class="promo-card purple" onclick="location.href='games/battles.html'" style="background: radial-gradient(circle at top right, rgba(168,85,247,0.4), #2e1065);">
      <div class="promo-label" style="font-size: 1.1rem; color: #fff;">–ë–∞—Ç—Ç–ª—ã</div>
      <div class="promo-icon" style="opacity: 0.8; filter: drop-shadow(0 0 10px rgba(168,85,247,0.5));">‚öîÔ∏è</div>
      <div class="arrow-btn" style="background: #a855f7;">‚ûú</div>
    </div>
    <div class="promo-card orange" onclick="location.href='games/roulette.html'" style="background: radial-gradient(circle at top right, rgba(251,191,36,0.4), #451a03);">
      <div class="promo-label" style="font-size: 1.1rem; color: #fff;">–ö–æ–ª–µ—Å–æ —É–¥–∞—á–∏</div>
      <div class="promo-icon" style="opacity: 0.8; filter: drop-shadow(0 0 10px rgba(251,191,36,0.5));">üé°</div>
      <div class="arrow-btn" style="background: #fbbf24; color: black;">‚ûú</div>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="content">
  <div class="section-header">
    <span class="section-icon">üéÆ</span>
    <div class="section-title">–í—Å–µ —Ä–µ–∂–∏–º—ã</div>
  </div>

  <div class="games-list">
    
    <div class="game-icon featured" onclick="location.href='games/battles.html'">
      <div class="game-icon-name">–ë–∞—Ç—Ç–ª—ã –ö–µ–π—Å–æ–≤</div>
      <div class="image-container">
        <img src="images/index/battles.png" alt="–ë–∞—Ç—Ç–ª—ã">
      </div>
    </div>

    <div class="game-icon" onclick="location.href='games/slots.html'">
      <div class="image-container"><img src="images/index/slots.png" alt="Slots"></div>
      <div class="game-icon-name">Slots</div>
    </div>

    <div class="game-icon" onclick="location.href='games/miner.html'">
      <div class="image-container"><img src="images/index/miner.png" alt="Miner"></div>
      <div class="game-icon-name">Miner</div>
    </div>

    <div class="game-icon" onclick="location.href='games/roulette.html'">
      <div class="image-container"><img src="images/index/roulette.png" alt="Roulette"></div>
      <div class="game-icon-name">Roulette</div>
    </div>

    <div class="game-icon" onclick="location.href='games/cards.html'">
      <div class="image-container"><img src="images/index/cards.png" alt="Cards"></div>
      <div class="game-icon-name">Cards</div>
    </div>

    <div class="game-icon" onclick="location.href='games/dice.html'">
      <div class="image-container"><img src="images/index/dice.png" alt="Dice"></div>
      <div class="game-icon-name">Dice</div>
    </div>

    <div class="game-icon" onclick="location.href='games/crash.html'">
      <div class="image-container"><img src="images/index/crash.png" alt="Crash"></div>
      <div class="game-icon-name">Crash</div>
    </div>

    <div class="game-icon" onclick="location.href='games/plinko.html'">
      <div class="image-container"><img src="images/index/plinko.png" alt="Plinko"></div>
      <div class="game-icon-name">Plinko</div>
    </div>

    <div class="game-icon" onclick="location.href='games/mines.html'">
      <div class="image-container"><img src="images/index/mines.png" alt="Mines"></div>
      <div class="game-icon-name">Mines</div>
    </div>

    <div class="game-icon" onclick="location.href='crypto.html'">
      <div class="image-container"><img src="images/index/crypto.png" alt="Crypto"></div>
      <div class="game-icon-name">Crypto</div>
    </div>

    <div class="game-icon" onclick="location.href='games/rooster-run.html'">
      <div class="image-container"><img src="images/index/rooster-run.png" alt="Rooster Run"></div>
      <div class="game-icon-name">Rooster Run</div>
    </div>

  </div>
</div>

<!-- Bottom Nav (Mobile) -->
<nav class="nav">
  <button class="nav-btn active">
    <span>üè†</span>
    –ì–ª–∞–≤–Ω–∞—è
  </button>
  <button class="nav-btn" onclick="location.href='leaderboard.html'">
    <span>üèÜ</span>
    –¢–æ–ø
  </button>
  <button class="nav-btn" onclick="location.href='inventory.html'">
    <span>üéí</span>
    –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
  </button>
  <button class="nav-btn" onclick="location.href='profile.html'">
    <span>üë§</span>
    –ü—Ä–æ—Ñ–∏–ª—å
  </button>
</nav>

<!-- Particles Background -->
<div class="particles" id="particles"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBVra2JN-C7-1b_Qa4cU8--XvJ83lymiM8",
    authDomain: "dropwin-8d94b.firebaseapp.com",
    projectId: "dropwin-8d94b",
    storageBucket: "dropwin-8d94b.firebasestorage.app",
    messagingSenderId: "988974289403",
    appId: "1:988974289403:web:886d34e6f65920a105fb5e",
    measurementId: "G-BK010MHN8N"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  function createParticles() {
    const container = document.getElementById('particles');
    for (let i = 0; i < 30; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      p.style.width = p.style.height = Math.random() * 3 + 1 + 'px';
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = Math.random() * 15 + 10 + 's';
      p.style.animationDelay = Math.random() * 5 + 's';
      container.appendChild(p);
    }
  }

  let currentUser = null;

  function loadCurrentUser() {
    onAuthStateChanged(auth, (user) => {
      if (user) {
        getDoc(doc(db, 'users', user.uid)).then((docSnap) => {
          if (docSnap.exists()) {
            currentUser = docSnap.data();
            document.getElementById('balance').textContent = currentUser.balance || 0;
            // Update Auth Button to show name or profile icon
            const authBtn = document.getElementById('authBtn');
            authBtn.textContent = currentUser.username || '–ü—Ä–æ—Ñ–∏–ª—å';
            authBtn.style.background = '#2a2a35'; // Darker for profile
            authBtn.onclick = () => location.href = 'profile.html';
          } else {
            // No user doc
            resetAuthUI();
          }
        }).catch((error) => {
          console.error('Error loading user:', error);
          resetAuthUI();
        });
      } else {
        // Check local storage guest
        const username = localStorage.getItem('dropwin_current_username');
        if (username === '–ì–æ—Å—Ç—å') {
            const users = JSON.parse(localStorage.getItem('dropwin_users')) || [];
            currentUser = users.find(u => u.username === username);
            if (currentUser) {
                document.getElementById('balance').textContent = currentUser.balance || 0;
                const authBtn = document.getElementById('authBtn');
                authBtn.textContent = '–ì–æ—Å—Ç—å';
                authBtn.onclick = () => location.href = 'profile.html';
            } else {
                resetAuthUI();
            }
        } else {
            resetAuthUI();
        }
      }
    });
  }

  function resetAuthUI() {
    document.getElementById('balance').textContent = '0';
    const authBtn = document.getElementById('authBtn');
    authBtn.textContent = '–í–æ–π—Ç–∏';
    authBtn.style.background = ''; // Reset to gradient
    authBtn.onclick = () => location.href = 'register.html';
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadCurrentUser();
    createParticles();
  });
</script>
</body>
</html>
